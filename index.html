<!DOCTYPE html><html lang="en">
    <head>
      <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
          <meta name="theme-color" content="#0f172a" />
            <link rel="manifest" href="manifest.json" />
              <title>Workout Tracker</title>
                <style>
                    body { font-family: sans-serif; margin: 0; padding: 1rem; background: #f8fafc; color: #0f172a; }
                        h1, h2 { margin-top: 1.5rem; }
                            .section { margin-bottom: 2rem; }
                                input, button, select { margin: 0.25rem 0; padding: 0.5rem; }
                                    .exercise-block { margin: 1rem 0; border: 1px solid #ccc; padding: 0.5rem; background: #fff; }
                                      </style>
                                      </head>
                                      <body>
                                        <h1>üèãÔ∏è Workout Tracker</h1>  <div class="section">
                                            <h2>Create Routine</h2>
                                                <input id="routineName" placeholder="Routine name" />
                                                    <button onclick="createRoutine()">Create</button>
                                                        <div id="newRoutineExercises"></div>
                                                            <button onclick="addExerciseToNewRoutine()">Add Exercise</button>
                                                              </div>  <div class="section">
                                                                  <h2>Saved Routines</h2>
                                                                      <select id="routineSelect"></select>
                                                                          <button onclick="startWorkoutFromRoutine()">Start Workout</button>
                                                                            </div>  <div class="section" id="workoutSection" style="display:none;">
                                                                                <h2>Workout in Progress</h2>
                                                                                    <div id="workoutExercises"></div>
                                                                                        <button onclick="saveWorkout()">Finish & Save Workout</button>
    </div>

    <div class="section" id="savedWorkoutsSection">
      <button id="toggleSavedWorkoutsBtn">Show/Hide Saved Workouts</button>
      <h2>My Saved Workouts</h2>
      <div id="savedWorkoutsList" style="display:none;"></div>
    </div>

    <script>
                                                                                              const routinesKey = 'workout_routines';
                                                                                                  const historyKey = 'workout_history';

                                                                                                      function loadSavedWorkouts() {
                                                                                                            const savedWorkoutsList = document.getElementById('savedWorkoutsList');
                                                                                                            savedWorkoutsList.innerHTML = ''; // Clear previous content

                                                                                                            const history = JSON.parse(localStorage.getItem(historyKey) || '[]');

                                                                                                            if (!history || history.length === 0) {
                                                                                                              savedWorkoutsList.innerHTML = '<p>No saved workouts yet.</p>';
                                                                                                              return;
                                                                                                            }

                                                                                                            // Iterate in reverse to show most recent workouts first
                                                                                                            for (let i = history.length - 1; i >= 0; i--) {
                                                                                                              const workout = history[i];
                                                                                                              const workoutItem = document.createElement('div');
                                                                                                              workoutItem.className = 'workout-item exercise-block'; // Re-use some styling

                                                                                                              const dateHeading = document.createElement('h3');
                                                                                                              dateHeading.textContent = `Workout Date: ${workout.date}`;
                                                                                                              workoutItem.appendChild(dateHeading);

                                                                                                              workout.exercises.forEach(exercise => {
                                                                                                                const exerciseDiv = document.createElement('div');
                                                                                                                exerciseDiv.style.marginBottom = '0.5rem';
                                                                                                                const exerciseName = document.createElement('p');
                                                                                                                exerciseName.innerHTML = `<strong>${exercise.name}</strong>`;
                                                                                                                exerciseDiv.appendChild(exerciseName);

                                                                                                                const setsList = document.createElement('ul');
                                                                                                                setsList.style.listStyle = 'none';
                                                                                                                setsList.style.paddingLeft = '1rem';
                                                                                                                exercise.sets.forEach((set, index) => {
                                                                                                                  const setItem = document.createElement('li');
                                                                                                                  setItem.textContent = `Set ${index + 1}: ${set.reps} reps @ ${set.weight} kg`;
                                                                                                                  setsList.appendChild(setItem);
                                                                                                                });
                                                                                                                exerciseDiv.appendChild(setsList);
                                                                                                                workoutItem.appendChild(exerciseDiv);
                                                                                                              });
                                                                                                              savedWorkoutsList.appendChild(workoutItem);
                                                                                                            }
                                                                                                          }

                                                                                                      function loadRoutines() {
                                                                                                            const routines = JSON.parse(localStorage.getItem(routinesKey) || '{}');
                                                                                                                  const select = document.getElementById('routineSelect');
                                                                                                                        select.innerHTML = '';
                                                                                                                              for (const name in routines) {
                                                                                                                                      const option = document.createElement('option');
                                                                                                                                              option.value = name;
                                                                                                                                                      option.textContent = name;
                                                                                                                                                              select.appendChild(option);
                                                                                                                                                                    }
                                                                                                                                                                        }

                                                                                                                                                                            function createRoutine() {
                                                                                                                                                                                  const name = document.getElementById('routineName').value.trim();
                                                                                                                                                                                        const exercises = [...document.querySelectorAll('.exercise-name')].map(el => el.value);
                                                                                                                                                                                              if (!name || exercises.length === 0) return alert('Enter name and at least one exercise');

                                                                                                                                                                                                    const routines = JSON.parse(localStorage.getItem(routinesKey) || '{}');
                                                                                                                                                                                                          routines[name] = exercises;
                                                                                                                                                                                                                localStorage.setItem(routinesKey, JSON.stringify(routines));
                                                                                                                                                                                                                      loadRoutines();
                                                                                                                                                                                                                            alert('Routine saved');
                                                                                                                                                                                                                                }

                                                                                                                                                                                                                                    function addExerciseToNewRoutine() {
                                                                                                                                                                                                                                          const container = document.getElementById('newRoutineExercises');
                                                                                                                                                                                                                                                const input = document.createElement('input');
                                                                                                                                                                                                                                                      input.placeholder = 'Exercise name';
                                                                                                                                                                                                                                                            input.className = 'exercise-name';
                                                                                                                                                                                                                                                                  container.appendChild(input);
                                                                                                                                                                                                                                                                      }

                                                                                                                                                                                                                                                                          function startWorkoutFromRoutine() {
                                                                                                                                                                                                                                                                                const select = document.getElementById('routineSelect');
                                                                                                                                                                                                                                                                                      const routineName = select.value;
                                                                                                                                                                                                                                                                                            const routines = JSON.parse(localStorage.getItem(routinesKey) || '{}');
                                                                                                                                                                                                                                                                                                  const exercises = routines[routineName] || [];

                                                                                                                                                                                                                                                                                                        const workoutContainer = document.getElementById('workoutExercises');
                                                                                                                                                                                                                                                                                                              workoutContainer.innerHTML = '';

                                                                                                                                                                                                                                                                                                                    exercises.forEach(name => {
                                                                                                                                                                                                                                                                                                                            const block = document.createElement('div');
                                                                                                                                                                                                                                                                                                                                    block.className = 'exercise-block';
                                                                                                                                                                                                                                                                                                                                            block.innerHTML = `<strong>${name}</strong><br/>` +
                                                                                                                                                                                                                                                                                                                                                      [...Array(3)].map((_, i) => `Set ${i+1}: <input type="number" placeholder="Reps" /> reps @ <input type="number" placeholder="Weight" /> kg<br/>`).join('');
                                                                                                                                                                                                                                                                                                                                                              workoutContainer.appendChild(block);
                                                                                                                                                                                                                                                                                                                                                                    });

                                                                                                                                                                                                                                                                                                                                                                          document.getElementById('workoutSection').style.display = 'block';
                                                                                                                                                                                                                                                                                                                                                                              }

                                                                                                                                                                                                                                                                                                                                                                                  function saveWorkout() {
                                                                                                                                                                                                                                                                                                                                                                                        const blocks = document.querySelectorAll('.exercise-block');
                                                                                                                                                                                                                                                                                                                                                                                              const date = new Date().toISOString().split('T')[0];
                                                                                                                                                                                                                                                                                                                                                                                                    const workout = { date, exercises: [] };

                                                                                                                                                                                                                                                                                                                                                                                                          blocks.forEach(block => {
                                                                                                                                                                                                                                                                                                                                                                                                                  const name = block.querySelector('strong').textContent;
                                                                                                                                                                                                                                                                                                                                                                                                                          const inputs = block.querySelectorAll('input');
                                                                                                                                                                                                                                                                                                                                                                                                                                  const sets = [];
                                                                                                                                                                                                                                                                                                                                                                                                                                          for (let i = 0; i < inputs.length; i += 2) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                    sets.push({ reps: Number(inputs[i].value), weight: Number(inputs[i + 1].value) });
                                                                                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    workout.exercises.push({ name, sets });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                          });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const history = JSON.parse(localStorage.getItem(historyKey) || '[]');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      history.push(workout);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            localStorage.setItem(historyKey, JSON.stringify(history));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  alert('Workout saved!');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        document.getElementById('workoutSection').style.display = 'none';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                function toggleSavedWorkoutsDisplay() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  const list = document.getElementById('savedWorkoutsList');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  if (list.style.display === 'none' || list.style.display === '') {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    list.style.display = 'block';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  } else {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    list.style.display = 'none';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                loadRoutines();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                loadSavedWorkouts();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                document.getElementById('toggleSavedWorkoutsBtn').addEventListener('click', toggleSavedWorkoutsDisplay);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  </script></body>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  </html>